{% extends 'base.html.twig' %}

{% block title %}Tous nos Instruments
{% endblock %}

{% block body %}
	<!-- Pagination avant -->
	<div class="container mx-auto mt-12 p-6 flex justify-center bg-gradient-to-r from-blue-50 via-indigo-100 to-pink-100 shadow-xl rounded-xl">
		{{ knp_pagination_render(products) }}
	</div>

	<!-- Conteneur principal -->
	<div class="container mx-auto mt-12 p-6 bg-gray-50 shadow-xl rounded-xl">
		<h1 class="text-4xl font-bold text-gray-800 text-center mb-12">Tous nos Instruments</h1>

		<!-- Grille des produits -->
		<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
			{% for product in products %}
				<!-- Carte produit -->
				<div
					class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105">

					<!-- Affichage des informations admin (si utilisateur admin) -->
					{% if is_granted('ROLE_ADMIN') %}
						<p class="text-xs text-gray-500 uppercase tracking-wider mb-2">Référence :
							<span class="font-medium">{{ product.ref }}</span>
						</p>
						<p class="text-xs text-gray-500 uppercase tracking-wider mb-2">Fournisseur :
							<span class="font-medium">{{ product.supplier.ref }}</span>
						</p>
					{% endif %}

					<p class="text-xs text-gray-500 uppercase tracking-wider mb-2">Rubrique :
						<span class="font-medium">{{ product.rubric.label }}</span>
					</p>

					<h2 class="text-xl font-semibold text-gray-800 mb-4">{{ product.label }}</h2>

					<!-- Image produit avec animation hover -->
					{% if product.image|length > 0 %}
						<div class="overflow-hidden rounded-lg mb-4">
							<img src="{{ product.image[0].img }}" alt="{{ product.label }}" class="w-full h-48 object-cover rounded-lg transition-transform duration-300 hover:scale-105">
						</div>
					{% endif %}

					<p class="text-gray-600 mb-4">{{ product.content }}</p>

					<p class="text-lg font-semibold text-gray-800 mb-6">Prix :
						<span class="text-indigo-600">{{ product.price }}
							€ HT</span>
					</p>

					<!-- Boutons actions -->
					<div class="mt-6 flex justify-between gap-4">
						<a href="{{ path('product_details', {'slug': product.slug}) }}" class="px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-yellow-300">
							Voir l'instrument
						</a>
						<a href="{{ path('cart_add', {'id': product.id}) }}" class="px-4 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 transition-all duration-200">
							Ajouter au panier
						</a>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>

	<!-- Pagination après -->
	<div class="container mx-auto mt-12 p-6 flex justify-center bg-gradient-to-r from-blue-50 via-indigo-100 to-pink-100 shadow-xl rounded-xl">
		{{ knp_pagination_render(products) }}
	</div>
{% endblock %}
